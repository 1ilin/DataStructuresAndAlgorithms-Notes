# 数组的类型定义
---
# 数组的顺序表示和实现
---
## 数组元素的地址关系
数组在内存中主要采用两种存储方式： 
	(1)以行序为主的存储方式; 
	(2)以列序为主的存储方式。
不同的存储方式有不同元素地址计算方法。
![](Pasted%20image%2020231124190620.png)
### 行序为主
设每个元素所占空间为L,`A[0][0]`的起始地址记为 `LOC[0,0]`。
二维数组`A[b1][b2]`中元素Aij的起始地址为： 
	`LOC[i,j]=LOC[0,0]+(b2*i+j)*L` 
三维数组`A[b1][b2][b3]`中数据元素`A[i][j][k]`的起始地址为：
	`LOC[i,j,k]=LOC[0,0,0]+(b2*b3*i+b3*j+k)*L`
n维数组`A[b1 ][b2 ]...[bn ]`中数据元素`A[j1 ,j2 ,…jn ]`的存储位置为： 
	`LOC[j1 ,j2 ,…jn ] =LOC[0,0,…,0]+ (b2*…*bn*j1 + b3*…*bn*j2 +…+ bn*jn-1 +jn )*L`

# 矩阵的压缩存储
---
## 特殊矩阵
### 下（上）三角矩阵
对角线以上(下)元素都为0的矩阵称为下(上)三角矩阵
#### 存储方式
下(上)三角矩阵对角线以上(下)元素都为零，根据这个特点可以定义一个长度为n*(n+1)/2的一维数组来存储。
#### 压缩存储时地址对应关系
设下三角矩阵为`a[n][n]`，用一维数组 `sa[n*(n+1)/2]`存储，则矩阵元素`a[i][j]`在数组sa中的位置为：
	当i>=j时 `a[i][j]`对应存储在`sa[i(i-1)/2+j-1]`

## 稀疏矩阵
![](Pasted%20image%2020231124191659.png)
### 稀疏矩阵的三元组顺序表存储 
根据稀疏矩阵大部分元素的值都为零的特点，可以只存储稀疏矩阵的非零元素，三元组分别记录非零元素的行，列位置和元素值。
![](Pasted%20image%2020231124191823.png)

## 矩阵的压缩存储
### 三元组顺序表的实现
```c
#define MAXSIZE 12500 
typedef struct { 
	int i, j; //该非零元的行下标和列下标 
	ElemType e; // 该非零元的值 
} Triple; // 三元组类型 
typedef struct { 
	Triple data[MAXSIZE + 1]; //data[0]未用 
	int mu, nu, tu; // 矩阵的行数、列数和非零元素的个数 
} TSMatrix; // 稀疏矩阵类型 

TSMatrix M;
```
### 三元组顺序表转置的实现
#### 示例
![](Pasted%20image%2020231124192139.png)
![](Pasted%20image%2020231124192211.png)
#### 算法
```c
Status TransposeSMatrix(TSMatrix M, TSMatrix &T) { 
	int p, q, col;T.mu=M.nu;T.nu=M.mu;T.tu=M.tu; 
	if (T.tu) { 
		q = 1; 
		for (col=1; col<=M.nu; ++col) 
			for (p=1; p<=M.tu; ++p) 
				if (M.data[p].j == col) { 
					T.data[q].i=M.data[p].j;
					T.data[q].j =M.data[p].i; 
					T.data[q].e =M.data[p].e; 
					++q; 
				} 
	} 
	return OK; 
}
```
时间复杂度为: `O(M.nu*M.tu)`

# 广义表的类型定义
---
## 引入
线性表要求数据元素的类型相同，在实际应用中线性表的数据类型往往不同。 
例如：一个公司有董事长，总经理，秘书，人事部，分公司等等，董事长、总经理、秘书都是单个的人，而人事部、分公司又是一个组织。 
如何在这种情况下应用线性表，就是广义表的范畴。

## 定义
广义表是线性表的推广，也称列表(Lists)。 它是 n个元素的有限序列，记作A=（a1 ,a2 ,……an ) 
其中A是表名，n是广义表的长度，ai是广义表的元素，ai既可以是单个元素，也可以是广义表。
### 术语
原子： 如果ai是单个元素，称为原子，一般用小写字母表示; 
子表： 如果ai是广义表，称为子表，一般用大写字母表示。
表头(Head)：非空广义表的第一个元素a1; 
表尾(Tail)：除了表头的其余元素组成的表; 
深度：广义表中括号嵌套的最大层数。
### 特点
广义表的元素可以是子表，子表的元素还可以是子表，存储空间难以确定，常采用链式存储。
### 基本操作举例
![](Pasted%20image%2020231124193241.png)
![](Pasted%20image%2020231124193303.png)

# 广义表的存储结构
---
## 头尾指针结点结构
广义表通常采用头、尾指针的链表结构
![](Pasted%20image%2020231124193417.png)
对于每一个结点，若tag=0表示这是一个原子结点，atom域存放该原子的值。若tag=1表示这是一个表结点，hp指向子表头，tp指向广义表的下一个
![](Pasted%20image%2020231124193926.png)
### 存储表示
```c
typedef enum{ATOM,LIST} ElemTag; 
typedef struct GLNode{ 
	ElemTag tag; 
	union{ 
		AtomType atom; 
		struct {
			struct GLNode *hp,*tp;
		}ptr; 
	} 
}*Glist;
```
## 扩展头尾指针结点结构
![](Pasted%20image%2020231124194225.png)
对于每一个结点，若tag=0表示这是一个原子结点，atom域存放该原子的值。若tag=1表示这是一个表结点，hp指向子表头，tp指向广义表的下一个
![](Pasted%20image%2020231124194323.png)
### 存储表示
```c
typedef enum{ATOM,LIST} ElemTag; 
typedef struct GLNode{ 
	ElemTag tag; 
	union{ 
		AtomType atom; 
		struct GLNode *hp; 
	}; 
	struct GLNode *tp; 
}
```
# 本章小结
---
熟练掌握： 
(1)数组的存储表示方法； 
(2)数组在存储结构中的地址计算方法； 
(3)特殊矩阵压缩存储时的下标变换公式； 
(4)稀疏矩阵的压缩存储方法； 
(5)三元组表示稀疏矩阵时进行矩阵运算采用的算法。 
(6)广义表的定义和性质。